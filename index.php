<?php
// Call set_include_path() as needed to point to your client library.
//require_once 'google/src/Google_Client.php';
//require_once 'google/src/Google_YouTubeService.php';
require_once ('lib/Google_Client.php');
require_once ('lib/Google_YouTubeService.php');
session_start();

/* You can acquire an OAuth 2 ID/secret pair from the API Access tab on the Google APIs Console
  <http://code.google.com/apis/console#access>
For more information about using OAuth2 to access Google APIs, please visit:
  <https://developers.google.com/accounts/docs/OAuth2>
Please ensure that you have enabled the YouTube Data API for your project. */
//$OAUTH2_CLIENT_ID = '745554625683-2o6prgpova2enrjs0kfed45ed4pfjf3p.apps.googleusercontent.com';
$OAUTH2_CLIENT_ID = '745554625683-2o6prgpova2enrjs0kfed45ed4pfjf3p.apps.googleusercontent.com';
$OAUTH2_CLIENT_SECRET = 'rfm7HiEQZCriJ24dQ9MEDXcx';

$client = new Google_Client();
$client->setClientId($OAUTH2_CLIENT_ID);
$client->setClientSecret($OAUTH2_CLIENT_SECRET);
$redirect = filter_var('http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'],
  FILTER_SANITIZE_URL);
$client->setRedirectUri($redirect);

$youtube = new Google_YoutubeService($client);

if (isset($_GET['code'])) {
  if (strval($_SESSION['state']) !== strval($_GET['state'])) {
    die('The session state did not match.');
  }

  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  header('Location: ' . $redirect);
}

if (isset($_SESSION['token'])) {
  $client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) {
  try {
    $channelsResponse = $youtube->channels->listChannels('contentDetails', array(
      'mine' => 'true',
    ));

    $htmlBody = '';
    
    foreach ($channelsResponse['items'] as $channel) {
      $uploadsListId = $channel['contentDetails']['relatedPlaylists']['uploads'];

      $playlistItemsResponse = $youtube->playlistItems->listPlaylistItems('snippet', array(
        'playlistId' => $uploadsListId,
        'maxResults' => 50
      ));

      $htmlBody .= "<h3>Videos in list $uploadsListId</h3><ul>";
      $htmlSlideshow = '';
      $htmlSlideIndicator='';
      $i= 0;
      foreach ($playlistItemsResponse['items'] as $playlistItem) {         
          if(!$i) {
              $htmlSlideIndicator .= '<li data-target="#carousel-example-captions" data-slide-to="'.$i.'" class="active"></li>';
               $htmlSlideshow .= sprintf('<div class="item active">%s %s %s</div>',
                    '<img alt="First slide" data-src="holder.js/900x500/auto/#777:#555/text:First slide" src="data:image/png;base64,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2e7j+ILHQr894/etNMd97DbrWC3mP8/jZDqL2XwRi+UyVutN7A6N+AO+PEEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkNT/At6PqVDVn575AAAAAElFTkSuQmCC">',
                    '<div class="carousel-caption"> <h3>'. $playlistItem['snippet']['title'].'</h3>',
                    '<p><a class="youtube" href="http://www.youtube.com/embed/'.$playlistItem['snippet']['resourceId']['videoId'].'?rel=0&amp;wmode=transparent"><img src="http://img.youtube.com/vi/'.$playlistItem['snippet']['resourceId']['videoId'].'/mqdefault.jpg"></a></p></div>');
              
          } else {
              $htmlSlideIndicator .= '<li data-target="#carousel-example-captions" data-slide-to="'.$i.'" class="active"></li>';
              $htmlSlideshow .= sprintf('<div class="item">%s %s %s</div>',
                    '<img alt="First slide" data-src="holder.js/900x500/auto/#777:#555/text:First slide" src="data:image/png;base64,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2e7j+ILHQr894/etNMd97DbrWC3mP8/jZDqL2XwRi+UyVutN7A6N+AO+PEEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkJQgBAAASEoQAgAAJCUIAQAAkhKEAAAASQlCAACApAQhAABAUoIQAAAgKUEIAACQlCAEAABIShACAAAkJQgBAACSEoQAAABJCUIAAICkBCEAAEBSghAAACApQQgAAJCUIAQAAEhKEAIAACQlCAEAAJIShAAAAEkJQgAAgKQEIQAAQFKCEAAAIClBCAAAkNT/At6PqVDVn575AAAAAElFTkSuQmCC">',
                    '<div class="carousel-caption"><h3>'. $playlistItem['snippet']['title'].'</h3>',
                    '<p><a class="youtube" href="http://www.youtube.com/embed/'.$playlistItem['snippet']['resourceId']['videoId'].'?rel=0&amp;wmode=transparent"><img src="http://img.youtube.com/vi/'.$playlistItem['snippet']['resourceId']['videoId'].'/mqdefault.jpg"></a></p></div>');
          }
         
           $i++;
            $htmlBody .= sprintf('<li>%s (%s) (%s)</li>', $playlistItem['snippet']['title'],
            $playlistItem['snippet']['resourceId']['videoId'], 'www.youtube.com/watch?v='.$playlistItem['snippet']['resourceId']['videoId']);
      }
      $htmlBody .= '</ul>';
    }
  } catch (Google_ServiceException $e) {
    $htmlBody .= sprintf('<p>A service error occurred: <code>%s</code></p>',
      htmlspecialchars($e->getMessage()));
  } catch (Google_Exception $e) {
    $htmlBody .= sprintf('<p>An client error occurred: <code>%s</code></p>',
      htmlspecialchars($e->getMessage()));
  }

  $_SESSION['token'] = $client->getAccessToken();
} else {
  $state = mt_rand();
  $client->setState($state);
  $_SESSION['state'] = $state;

  $authUrl = $client->createAuthUrl();
  $htmlBody = <<<END
  <h3>Authorization Required</h3>
  <p>You need to <a href="$authUrl">authorize access</a> before proceeding.<p>
END;
}
?>

<!doctype html>
<html>
  <head>
     <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
         <title>My Youtube Account</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-theme.css">
        <link rel="stylesheet" href="css/colorbox.css">
        <link rel="stylesheet" href="css/main.css">
  </head>
  <body>
    <div class="col-lg-7">
         <div id="carousel-example-captions" class="carousel slide" data-ride="carousel">
           <ol class="carousel-indicators">
                <?=$htmlSlideIndicator?>
           </ol>
           <div class="carousel-inner">
                <?=$htmlSlideshow?>
           </div>
           <a class="left carousel-control" href="#carousel-example-captions" data-slide="prev">
             <span class="glyphicon glyphicon-chevron-left"></span>
           </a>
           <a class="right carousel-control" href="#carousel-example-captions" data-slide="next">
             <span class="glyphicon glyphicon-chevron-right"></span>
           </a>
         </div>
       </div>
    <script src="js/vendor/jquery-1.10.2.min.js"></script>
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <script src="js/jquery.colorbox-min.js"></script>
    <script src="js/main.js"></script>
    
  </body>
</html>
